function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{TUkU:function(e,t,r){"use strict";r.r(t);var n,a=r("TEn/"),i=r("tyNb"),o=r("ofXK"),s=r("3Pt+"),c=r("mrSG"),u=r("gcOT"),h=r("fXoL"),l=u.e,b=l.Camera,f=l.Filesystem,p=l.Storage,d=((n=function(){function e(t){_classCallCheck(this,e),this.photos=[],this.PHOTO_STORAGE="photos",this.convertBlobToBase64=function(e){return new Promise((function(t,r){var n=new FileReader;n.onerror=r,n.onload=function(){t(n.result)},n.readAsDataURL(e)}))},this.platform=t}return _createClass(e,[{key:"loadSaved",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get({key:this.PHOTO_STORAGE});case 2:if(t=e.sent,this.photos=JSON.parse(t.value)||[],this.platform.is("hybrid")){e.next=32;break}r=!0,n=!1,a=void 0,e.prev=7,i=this.photos[Symbol.iterator]();case 9:if(r=(o=i.next()).done){e.next=18;break}return s=o.value,e.next=13,f.readFile({path:s.filepath,directory:u.d.Data});case 13:c=e.sent,s.base64="data:image/jpeg;base64,".concat(c.data);case 15:r=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),n=!0,a=e.t0;case 24:e.prev=24,e.prev=25,r||null==i.return||i.return();case 27:if(e.prev=27,!n){e.next=30;break}throw a;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])})))}},{key:"addNewToGallery",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getPhoto({resultType:u.a.Uri,source:u.b.Camera,quality:100});case 2:return t=e.sent,e.next=5,this.savePicture(t);case 5:r=e.sent,this.photos.unshift(r),p.set({key:this.PHOTO_STORAGE,value:this.platform.is("hybrid")?JSON.stringify(this.photos):JSON.stringify(this.photos.map((function(e){var t=Object.assign({},e);return delete t.base64,t})))});case 7:case"end":return e.stop()}}),e,this)})))}},{key:"savePicture",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readAsBase64(e);case 2:return r=t.sent,n=(new Date).getTime()+".jpeg",t.next=6,f.writeFile({path:n,data:r,directory:u.d.Data});case 6:return t.next=8,this.getPhotoFile(e,n);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"readAsBase64",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.platform.is("hybrid")){t.next=4;break}return t.next=3,f.readFile({path:e.path});case 3:return t.abrupt("return",t.sent.data);case 4:return t.next=6,fetch(e.webPath);case 6:return r=t.sent,t.next=9,r.blob();case 9:return n=t.sent,t.next=12,this.convertBlobToBase64(n);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})))}},{key:"getPhotoFile",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.platform.is("hybrid")){r.next=5;break}return r.next=3,f.getUri({directory:u.d.Data,path:t});case 3:return n=r.sent,r.abrupt("return",{filepath:n.uri,webviewPath:u.c.convertFileSrc(n.uri)});case 5:return r.abrupt("return",{filepath:t,webviewPath:e.webPath});case 6:case"end":return r.stop()}}),r,this)})))}},{key:"deletePicture",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.photos.splice(t,1),p.set({key:this.PHOTO_STORAGE,value:JSON.stringify(this.photos)}),n=e.filepath.substr(e.filepath.lastIndexOf("/")+1),r.next=4,f.deleteFile({path:n,directory:u.d.Data});case 4:case"end":return r.stop()}}),r,this)})))}}]),e}()).\u0275fac=function(e){return new(e||n)(h.Qb(a.C))},n.\u0275prov=h.Fb({token:n,factory:n.\u0275fac,providedIn:"root"}),n);function v(e,t){if(1&e){var r=h.Nb();h.Mb(0,"ion-col",6),h.Mb(1,"ion-img",7),h.Ub("click",(function(e){h.dc(r);var n=t.$implicit,a=t.index;return h.Wb().showActionSheet(n,a)})),h.Lb(),h.Lb()}if(2&e){var n=t.$implicit;h.zb(1),h.ac("src",n.base64?n.base64:n.webviewPath)}}var m,w=((m=function(){function e(t,r){_classCallCheck(this,e),this.photoService=t,this.actionSheetController=r}return _createClass(e,[{key:"ngOnInit",value:function(){this.photoService.loadSaved()}},{key:"showActionSheet",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,a=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.actionSheetController.create({header:"Photos",buttons:[{text:"Delete",role:"destructive",icon:"trash",handler:function(){a.photoService.deletePicture(e,t)}},{text:"Cancel",icon:"close",role:"cancel",handler:function(){}}]});case 2:return n=r.sent,r.next=5,n.present();case 5:case"end":return r.stop()}}),r,this)})))}}]),e}()).\u0275fac=function(e){return new(e||m)(h.Jb(d),h.Jb(a.a))},m.\u0275cmp=h.Db({type:m,selectors:[["app-tab2"]],decls:15,vars:1,consts:[["collapse","condense"],["size","large"],["size","6",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","camera"],["size","6"],[3,"src","click"]],template:function(e,t){1&e&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar"),h.Mb(2,"ion-title"),h.hc(3," Photo Gallery "),h.Lb(),h.Lb(),h.Lb(),h.Mb(4,"ion-content"),h.Mb(5,"ion-header",0),h.Mb(6,"ion-toolbar"),h.Mb(7,"ion-title",1),h.hc(8,"Photo Gallery"),h.Lb(),h.Lb(),h.Lb(),h.Mb(9,"ion-grid"),h.Mb(10,"ion-row"),h.gc(11,v,2,1,"ion-col",2),h.Lb(),h.Lb(),h.Mb(12,"ion-fab",3),h.Mb(13,"ion-fab-button",4),h.Ub("click",(function(e){return t.photoService.addNewToGallery()})),h.Kb(14,"ion-icon",5),h.Lb(),h.Lb(),h.Lb()),2&e&&(h.zb(11),h.Zb("ngForOf",t.photoService.photos))},directives:[a.n,a.z,a.y,a.j,a.m,a.u,o.h,a.k,a.l,a.o,a.i,a.p],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:translucent}"]}),m),g=r("qtYk");r.d(t,"Tab2PageModule",(function(){return y}));var k,y=((k=function e(){_classCallCheck(this,e)}).\u0275mod=h.Hb({type:k}),k.\u0275inj=h.Gb({factory:function(e){return new(e||k)},imports:[[a.A,o.b,s.a,g.a,i.j.forChild([{path:"",component:w}])]]}),k)}}]);